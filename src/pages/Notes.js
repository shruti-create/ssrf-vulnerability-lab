import React, { useState, useEffect } from "react";
import Calendar from "react-calendar";
import "react-calendar/dist/Calendar.css";
import "./Notes.css"; 
const Notes = ()  => {
  const [note, setNote] = useState("");
  const [userNotes, setUserNotes] = useState({});
  
  useEffect(() => {
    const savedNotes = JSON.parse(localStorage.getItem("notes")) || {};
    setUserNotes(savedNotes);
  }, []);

  const handleNoteChange = (event) => {
    setNote(event.target.value);
  };

  const handleAddNote = () => {
    if (note.trim() !== "") {
      const currentUserNotes = userNotes["user"] || [];
      const updatedUserNotes = [...currentUserNotes, note];
      const updatedNotes = { ...userNotes, ["user"]: updatedUserNotes };
      setUserNotes(updatedNotes);
      setNote("");
      localStorage.setItem("notes", JSON.stringify(updatedNotes));
    }
  };

  const handleRemoveNote = (index) => {
    const currentUserNotes = userNotes["user"] || [];
    const updatedUserNotes = [...currentUserNotes];
    updatedUserNotes.splice(index, 1);
    const updatedNotes = { ...userNotes, ["user"]: updatedUserNotes };
    setUserNotes(updatedNotes);
    localStorage.setItem("notes", JSON.stringify(updatedNotes));
  };

  const currentUserNotes = userNotes["user"] || [];

  return (
    <section className="notes-section">
      <div className="notes-container">
        <div className="notes-input">
          <textarea
            value={note}
            onChange={handleNoteChange}
            placeholder="Enter your note here..."
          />
          <button className="add-note-button" onClick={handleAddNote}>
            Add Note
          </button>
        </div>
        <div className="notes-list">
          {currentUserNotes.map((note, index) => (
            <div key={index} className="note-item">
              <p className="note-text">{note}</p>
              <button
                className="remove-note-button"
                onClick={() => handleRemoveNote(index)}
              >
                Remove
              </button>
            </div>
          ))}
          {currentUserNotes.length === 0 && (
            <p className="no-notes-text">No notes added yet.</p>
          )}
        </div>
      </div>
    </section>
  );
};

export default Notes;
